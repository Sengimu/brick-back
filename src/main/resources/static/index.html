<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>

    <!-- 引入vue -->
    <script src="./lib/vue/vue.js"></script>

    <!-- elementUI -->
    <link rel="stylesheet" href="./lib/elementUI/index.css">
    <script src="./lib/elementUI/index.js"></script>

    <!-- axios -->
    <script src="./lib/axios/axios.js"></script>

    <!-- 自定义CSS -->
    <link rel="stylesheet" href="./css/main.css">
</head>

<body>
<div id="app">

    <el-container>

        <el-header>

            <index_nav></index_nav>

        </el-header>

        <el-main style="position: absolute;left: 0;top: 60px;right: 0;bottom: 0;overflow-y: scroll">

            <!-- 循播图 -->
            <el-row>
                <el-col :span="24">
                    <el-carousel :height="carouselHeight+'px'">
                        <el-carousel-item v-for="item in bgUrls" :key="item">
                            <el-image :src="item">
                            </el-image>
                        </el-carousel-item>
                    </el-carousel>
                </el-col>
            </el-row>

        </el-main>

    </el-container>

</div>

<!-- 自定义js -->
<script src="./components/index_nav.js"></script>
<script src="./components/responsive.js"></script>
<script>
    new Vue({
        el: '#app',
        data: {
            //响应布局数值
            carouselHeight: 0,

            bgUrls: [],
        },
        mounted() {
            this.getInfo();
            this.initScreenSize();
        },
        methods: {
            initScreenSize() {
                this.carouselHeight = getCarouselHeight();
                window.onresize = () => {
                    this.carouselHeight = getCarouselHeight();
                }
            },
            getInfo() {
                let that = this;
                axios.get("/web/info/getInfo")
                    .then(function (resp) {
                        if (resp.data.code == 1) {
                            document.title = resp.data.data.title;
                            that.bgUrls = resp.data.data.bgUrls;
                        }
                    })
            }
        }
    })
</script>
</body>
</html>